<!DOCTYPE html>
<html lang="ru" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>–í—Å–µ –∑–∞–∫–∞–∑—ã | Stroy1Click Admin</title>

    <link rel="stylesheet" href="../../static/css/common/footer.css" th:href="@{/css/common/footer.css}">
    <link rel="stylesheet" href="../../static/css/common/header.css" th:href="@{/css/common/header.css}">
    <link rel="stylesheet" href="../../static/css/admin/order.css" th:href="@{/css/admin/order.css}">

    <script th:src="@{/js/common/header.js}"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<header class="main-header">
    <div class="logo">Stroy1Click <span style="font-size: 12px; color: #888;">Admin</span></div>

    <nav>
        <a href="/">–ì–ª–∞–≤–Ω–∞—è</a>
        <a href="/admin/orders" class="active-link">–ó–∞–∫–∞–∑—ã</a> <a href="/admin/categories">–ö–∞—Ç–µ–≥–æ—Ä–∏–∏</a>
    </nav>

    <div class="header">
        <div class="search-icon-wrapper">
            <svg viewBox="0 0 24 24"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 3 13.09 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/></svg>
        </div>
        <input type="text" class="search-input" placeholder="–ü–æ–∏—Å–∫ –∑–∞–∫–∞–∑–∞...">
    </div>

    <div class="header-actions">
        <div class="action-btn profile-btn">
            <svg viewBox="0 0 24 24"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg>
            <a href="/user/profile" class="btn-text">–ü—Ä–æ—Ñ–∏–ª—å</a>
        </div>
    </div>

    <div class="burger" onclick="toggleMenu()">
        <span></span><span></span><span></span>
    </div>
</header>


<a href="/admin/orders/new">–ù–æ–≤—ã–µ –∑–∞–∫–∞–∑—ã</a>
<div class="container" style="flex-direction: column; align-items: center;">
    <div style="width: 100%; max-width: 1400px; margin-bottom: 20px; display: flex; justify-content: space-between; align-items: center;">
        <h2>–í—Å–µ –∑–∞–∫–∞–∑—ã</h2>
    </div>

    <div th:if="${orders.isEmpty()}" class="no-orders" style="padding: 50px; text-align: center; color: var(--text-muted);">
        <h3>–°–ø–∏—Å–æ–∫ –∑–∞–∫–∞–∑–æ–≤ –ø—É—Å—Ç</h3>
        <p>–ù–æ–≤—ã–µ –∑–∞–∫–∞–∑—ã –ø–æ—è–≤—è—Ç—Å—è –∑–¥–µ—Å—å</p>
    </div>

    <div class="orders-feed" th:unless="${orders.isEmpty()}">

        <div class="order-card" th:each="order : ${orders}">

            <div class="order-header">
                <span class="order-id" th:text="'–ó–∞–∫–∞–∑ #' + ${order.id}"></span>

                <span class="order-status"
                      th:text="${order.orderStatus}"
                      th:classappend="'status-' + ${#strings.toLowerCase(order.orderStatus)}">

                </span>
            </div>

            <div class="order-info-grid">
                <div class="info-item">
                    <label>–ö–æ–º–ø–∞–Ω–∏—è</label>
                    <span th:text="${order.legalForm} + ' &quot;' + ${order.legalName} + '&quot;'"></span>
                </div>

                <div class="info-item">
                    <label>–ò–ù–ù / –ö–ü–ü</label>
                    <span th:text="${order.inn} + (${order.kpp != null and !order.kpp.isEmpty()} ? ' / ' + ${order.kpp} : '')"></span>
                </div>

                <div class="info-item">
                    <label>–ö–æ–Ω—Ç–∞–∫—Ç–Ω–æ–µ –ª–∏—Ü–æ</label>
                    <span th:text="${order.contactName} + ' (' + ${order.contactPhone} + ')'"></span>
                </div>

                <div class="info-item">
                    <label>Email</label>
                    <span th:text="${order.contactEmail}"></span>
                </div>

                <div class="info-item">
                    <label>–ê–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏</label>
                    <span th:text="${order.deliveryAddress}"></span>
                </div>

                <div class="info-item">
                    <label>–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è</label>
                    <span th:text="${order.createdAt != null ? #temporals.format(order.createdAt, 'dd MMMM HH:mm') : '–ù–µ —É–∫–∞–∑–∞–Ω–∞'}"></span>
                </div>
            </div>

            <div class="info-item">
                <label>–°–æ—Å—Ç–∞–≤ –∑–∞–∫–∞–∑–∞:</label>
                <div class="order-items-list">
                    <div class="item-row" th:each="item : ${order.orderItems}">
                        <span th:text="'–¢–æ–≤–∞—Ä ID: ' + ${item.productId}"></span>
                        <span th:text="'x ' + ${item.quantity} + ' —à—Ç.'">.</span>
                    </div>
                </div>
            </div>

            <div class="order-notes" th:if="${order.notes != null and !order.notes.isEmpty()}">
                <span th:text="'üí¨ ' + ${order.notes}"></span>
            </div>

            <div style="margin-top: auto; padding-top: 20px; text-align: right;">
                <a th:href="@{/admin/orders/{id}(id=${order.id})}"
                   style="color: #3498db; text-decoration: none; font-size: 14px; font-weight: bold;">
                    –û—Ç–∫—Ä—ã—Ç—å –ø–æ–¥—Ä–æ–±–Ω–æ &rarr;
                </a>
            </div>

        </div> </div> </div>

<footer>
    <div class="col">
        <h3>Stroy1Click</h3>
        <p>–û–û–û "–í—ç–ª–°–Ω–∞–±"</p>
        <p>–ù–∞–¥—ë–∂–Ω—ã–π –ø–æ—Å—Ç–∞–≤—â–∏–∫ —Å—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤</p>
        <p>+7 914 790 43 80</p>
        <p>2704380@mail.ru</p>
        <p>–≥. –í–ª–∞–¥–∏–≤–æ—Å—Ç–æ–∫, —É–ª. –í—ã—Å–µ–ª–∫–æ–≤–∞—è 61–≤.</p>
    </div>
</footer>

</body>
</html>